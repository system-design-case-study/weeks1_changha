# Chapter 1 Scope

## Goal

`근접성 서비스`의 1장 구현은 아래 기능을 안정적으로 제공하는 것을 목표로 한다.

- 사용자 위치(위도/경도) + 반경으로 주변 사업장 목록 검색
- 사업장 상세 조회
- 사업장 추가/수정/삭제(CRUD)
- 사업장 쓰기 결과가 검색 인덱스에 `최종 일관성(eventual consistency)`으로 반영

## Non-Goal

1장에서는 아래 항목을 구현 범위에서 제외한다.

- 개인화 랭킹(사용자 취향/클릭 이력 기반 정렬)
- 실시간 인덱스 동기화(쓰기 직후 검색 반영)
- 다중 리전 Active-Active 데이터 복제
- 복잡한 도메인 정책(영업시간 예외 캘린더, 광고 우선 노출 등)

## Traffic And SLO

- DAU: `100,000,000`
- 사용자당 일 검색 횟수: `5`
- 평균 QPS: `5,000`
- 피크 QPS(가정): 평균의 `3~5배`

초기 목표 SLO:

- `GET /v1/search/nearby` p95 지연시간: `<= 150ms` (캐시 히트 기준)
- API 가용성: `99.95%`
- 검색 인덱스 반영 지연: `<= 24h` (1장 기본값)

## Architecture Boundary

1장 구현은 단일 Spring Boot 애플리케이션 안에서 모듈을 분리해 시작한다.

- `Search(LBS) Module`: 지오해시 계산, 인접 셀 탐색, 반경 필터링
- `Business Module`: 사업장 CRUD, 상세 조회
- `Index Sync Module`: 변경분을 지리 인덱스/캐시에 반영하는 배치

향후 트래픽 증가 시 Search와 Business를 별도 서비스로 분리한다.

## Privacy Baseline

- 원본 위경도는 요청 처리에만 사용하고, 장기 저장하지 않는다.
- 애플리케이션 로그에는 위경도 원본 대신 마스킹 또는 소수점 축약값을 남긴다.
- 위치 데이터 보관 기간은 최소화하고, 운영 문서에 삭제 정책을 명시한다.

## Delivery Milestone

1. API 계약과 데이터 모델 확정
2. 지오해시 기반 검색 + CRUD 구현
3. 캐시, 배치 동기화, 통합 테스트 추가
4. 성능 측정(부하 테스트) 및 SLO 검증
