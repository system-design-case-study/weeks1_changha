# 지오해시 정책

## 정밀도 기준

반경 구간별 정밀도 시작값은 아래와 같이 둔다.

- `<= 300m`: 정밀도 `7`
- `<= 1km`: 정밀도 `6`
- `<= 5km`: 정밀도 `5`
- `<= 20km`: 정밀도 `4`
- `> 20km`: 정밀도 `3`

운영 측정 결과에 따라 이 표를 조정한다.

## 검색 절차

1. 선택한 정밀도로 중심 geohash를 계산한다.
2. 인접 geohash 8개를 계산한다.
3. 총 9개 해시에 대해 사업장 ID를 조회한다.
4. 사업장 상세 정보를 조회한다.
5. Haversine 거리로 반경(`<= radius`)을 필터링한다.
6. 거리 오름차순으로 정렬한다.

## 일관성 메모

- geohash 인덱스는 최종 일관성 기반의 투영 데이터로 취급한다.
- 인덱스가 지연되어도 사업장 CRUD 원본 데이터가 기준이다.
- 허용 가능한 동기화 지연을 런북에 명시하고 모니터링한다.
